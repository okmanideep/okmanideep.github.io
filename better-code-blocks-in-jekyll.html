<!DOCTYPE html>
<html>
<head>
    <!-- [[! Document Settings ]] -->
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />

    <!-- [[! Page Meta ]] -->
    <title>Better code blocks in Jekyll</title>
    <meta name="description" content="Blog | Manideep - Android · Development · Design" />

    <meta name="HandheldFriendly" content="True" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />

    <link rel="shortcut icon" href="/assets/favicon-47a0420670a0a244defce9e5220a1f403f170a7a9015f99ca753a4fe2369c98f.ico" >

    <!-- [[! Styles'n'Scripts ]] -->
    <link type="text/css" rel="stylesheet" href="/assets/main-0828c4b1405facf91509860d41beff1e13c12aa9b8bfd727103702240986e982.css">
    <link href='https://fonts.googleapis.com/css?family=Inconsolata' rel='stylesheet' type='text/css'>

    <!-- [[! Ghost outputs important style and meta data with this tag ]] -->
        <link rel="canonical" href="" />
    <meta name="referrer" content="origin" />
    <link rel="next" href="page2/" />

    <meta property="og:site_name" content="Blog | Manideep" />
    <meta property="og:type" content="article" />
    <meta property="og:title" content="Better code blocks in Jekyll" />
    <meta property="og:description" content="Your code can look a lot better in your blog powered by Jekyll if you do these simple things. Add line numbers, line highlights in your plain github flavored markdown in all your blog posts." />
    <meta property="og:url" content="https://okmanideep.github.io/better-code-blocks-in-jekyll" />
    <meta property="og:image" content="https://okmanideep.github.io/assets/logo_fb-f0496ce9ac22d679cd89359c44a58ed65cd34aaefaa811c2b2a4334c105a140d.jpg" />
    <meta property="og:locale" content="en_US" />
    <meta property="article:author" content="https://www.facebook.com/manideepiitb">

    <meta name="twitter:card" content="summary" />
    <meta name="twitter:title" content="Better code blocks in Jekyll" />
    <meta name="twitter:description" content="Your code can look a lot better in your blog powered by Jekyll if you do these simple things. Add line numbers, line highlights in your plain github flavored markdown in all your blog posts." />
    <meta name="twitter:image" content="https://okmanideep.github.io/assets/logo_black_square-e3783420100f3db97c5f11badb0484f43bbfc54487fda2a0bb7791d2e68252e9.png" />
    <meta name="twitter:author" content="@okmanideep">

    <script type="application/ld+json">
{
    "@context": "http://schema.org",
    "@type": "Website",
    "publisher": "Manideep Polireddi",
    "url": "https://okmanideep.github.io",
    "image": "/assets/logo_black-e492ce6d683ab7ad291843c9ca39fe242daa139336311d97ef7a497205882578.png",
    "description": "Android · Development · Design"
}
    </script>

    <meta name="generator" content="Jekyll 3.0.0" />
    <link rel="alternate" type="application/rss+xml" title="Blog | Manideep" href="feed.xml" />


</head>
<body class="post-template nav-closed">

    <div class="nav">
    <h3 class="nav-title">Menu</h3>
    <a href="#" class="nav-close">
        <span class="hidden">Close</span>
    </a>
    <ul>
        <li class="nav-home " role="presentation"><a href="">Home</a></li>
        <!--<li class="nav-about " role="presentation"><a href="about.html">About</a></li>
        <li class="nav-fables " role="presentation"><a href="tag/fables/">Fables</a></li>
        <li class="nav-speeches " role="presentation"><a href="tag/speeches/">Speeches</a></li>
        <li class="nav-fiction " role="presentation"><a href="tag/fiction/">Fiction</a></li>-->
        <li class="nav-author " role="presentation"><a href="author/okmanideep/">Author</a></li>
    </ul>
    <a class="subscribe-button icon-feed" href="feed.xml">Subscribe</a>
</div>
<span class="nav-cover"></span>


    <div class="site-wrapper">

        <!-- [[! Everything else gets inserted here ]] -->
        <!-- < default -->

<!-- The comment above "< default" means - insert everything in this file into -->
    <!-- the [body] of the default.hbs template, which contains our header/footer. -->

<!-- Everything inside the #post tags pulls data from the post -->
<!-- #post -->

<header class="main-header post-head no-cover">
    <nav class="main-nav  clearfix">
        <a class="blog-logo" href="/"><img src="/assets/logo_black-e492ce6d683ab7ad291843c9ca39fe242daa139336311d97ef7a497205882578.png" alt="Blog Logo"></a>
        
            <a class="menu-button icon-menu" href="#"><span class="word">Menu</span></a>
        
    </nav>
</header>

<main class="content" role="main">

    <article class="post tag-jekyll tag-gh-pages">

        <header class="post-header">
            <h1 class="post-title">Better code blocks in Jekyll</h1>
            <section class="post-meta">
            <!-- <a href=''>Manideep Polireddi</a> -->
            <time class="post-date" datetime="2015-11-23">23 Nov 2015</time>
                <!-- [[tags prefix=" on "]] -->
                 
                on 
                
                    
                       <a href='/tag/jekyll'>Jekyll</a>,
                       
                
                    
                       <a href='/tag/gh-pages'>Gh-pages</a>
                       
                
                
                 · 
                <span class="post-author">by <a rel="author" href="/author/okmanideep">Manideep Polireddi</a>
            </section>
        </header>

        <section class="post-content">
            
            <p>If you are blogging a lot of code, it makes a huge difference if you style your code blocks well. If you are using some Jekyll theme, chances are the default output is not so pleasing. If you are not much familiar with <code>Jekyll</code> or <code>Pygments</code>, trust me it would take a lot of time to get what you want by just searching the web. I have gathered  all the scattered suggestions I found and arranged them into this post. Let&#39;s make your code look better</p>

<h2>Setting up pygments</h2>

<p>In <code>_config.yml</code></p>
<div class="highlight"><pre><code class="language-ruby" data-lang="ruby"><span></span><a name="line-1"></a><span class="ss">markdown</span><span class="p">:</span> <span class="n">redcarpet</span>
<a name="line-2"></a><span class="ss">redcarpet</span><span class="p">:</span>
<a name="line-3"></a>    <span class="ss">extension</span><span class="p">:</span>
<a name="line-4"></a>        <span class="o">-</span> <span class="n">fenced_code_blocks</span>
<a name="line-5"></a><span class="ss">highlighter</span><span class="p">:</span> <span class="n">pygments</span>
<a name="line-6"></a><span class="o">...</span>
<a name="line-7"></a><span class="o">...</span>
</code></pre></div>
<p>This sets <code>redcarpet</code> as our markdown parser and <code>pygments</code> as our code highlighter.<br>
And <code>fenced_code_blocks</code> extension enables you to write code blocks like in Github flavoured markdown using ```  </p>

<figure class="highlight"><pre><code class="language-text" data-lang="text"><span></span><a name="True-1"></a>```css
<a name="True-2"></a>.left {float: left;}
<a name="True-3"></a>
<a name="True-4"></a>.right {float: right;}
<a name="True-5"></a>```</code></pre></figure>

<h2>Syntax highlighting</h2>

<p>By now your code probably looks like this</p>

<figure class="highlight"><pre><code class="language-text" data-lang="text"><span></span>  .left {float: left;}
  
  .right {float: right;}</code></pre></figure>

<p>Just like plain text and no syntax highlighting based on the language you specified. But if you look at source you can see that <code>pygments</code> has analysed the code as css and added some classes to different parts of the code. All we need to do is add some css to those classes.</p>

<p>I have written a <a href="https://gist.github.com/okmanideep/aa0890c6da9104e16a7a">github like color scheme</a>. You can find other styles online for <a href="https://www.google.co.in/search?q=pygments+syntax+highlighting+css">pygments syntax highlighting css</a>.</p>

<p>After adding the sytax highlighting css your code should look like this</p>

<figure class="highlight"><pre><code class="language-css" data-lang="css"><span></span>  <span class="p">.</span><span class="nc">left</span> <span class="p">{</span><span class="k">float</span><span class="p">:</span> <span class="kc">left</span><span class="p">;}</span>
  
  <span class="p">.</span><span class="nc">right</span> <span class="p">{</span><span class="k">float</span><span class="p">:</span> <span class="kc">right</span><span class="p">;}</span></code></pre></figure>

<h2>Line Numbers</h2>

<p>As mentioned by <a href="https://drewsilcock.co.uk/proper-linenumbers/">Drew Silcock</a>, <a href="https://developer.mozilla.org/en-US/docs/Web/CSS/CSS_Lists_and_Counters/Using_CSS_counters">CSS Counters</a> is the best way to add line numbers to your code blocks. Add css counters to your <code>pre</code> blocks using <a href="https://gist.github.com/okmanideep/55419a959b7fd39a1c89">jekyll-pygments-line-numbers.css</a>.</p>

<p>To use this technique we should tell pygments to generate <code>lineanchors</code> for the code blocks. We can do this by using liquid template tags for our code blocks</p>

<figure class="highlight"><pre><code class="language-text" data-lang="text"><span></span><a name="True-1"></a>{% highlight css %}
<a name="True-2"></a>.left {float: left;}
<a name="True-3"></a>
<a name="True-4"></a>.right {float: right;}
<a name="True-5"></a>{% endhighlight %}</code></pre></figure>

<p>But we want to write our code block using ```<code>css</code>. We can do this by adding a custom redcarpet parser. Add this <code>redcarpet-custom.rb</code> file to your <code>_plugins</code> folder</p>
<div class="highlight"><pre><code class="language-ruby" data-lang="ruby"><span></span><a name="line-1"></a><span class="k">module</span> <span class="nn">Jekyll</span>
<a name="line-2"></a>  <span class="k">module</span> <span class="nn">Converters</span>
<a name="line-3"></a>    <span class="k">class</span> <span class="nc">Markdown</span>
<a name="line-4"></a>      <span class="k">class</span> <span class="nc">RedcarpetParser</span>
<a name="line-5"></a>        <span class="k">module</span> <span class="nn">WithPygments</span>
<a name="line-6"></a>          <span class="kp">include</span> <span class="no">CommonMethods</span>
<a name="line-7"></a>          <span class="k">def</span> <span class="nf">block_code</span><span class="p">(</span><span class="n">code</span><span class="p">,</span> <span class="n">lang</span><span class="p">)</span>
<a name="line-8"></a>            <span class="nb">require</span> <span class="s1">&#39;pygments&#39;</span>
<a name="line-9"></a>            <span class="n">lang</span> <span class="o">=</span> <span class="n">lang</span> <span class="o">&amp;&amp;</span> <span class="n">lang</span><span class="o">.</span><span class="n">split</span><span class="o">.</span><span class="n">first</span> <span class="o">||</span> <span class="s2">&quot;text&quot;</span>
<a name="line-10"></a>            <span class="n">output</span> <span class="o">=</span> <span class="n">add_code_tags</span><span class="p">(</span>
<a name="line-11"></a>              <span class="no">Pygments</span><span class="o">.</span><span class="n">highlight</span><span class="p">(</span><span class="n">code</span><span class="p">,</span> <span class="ss">:lexer</span> <span class="o">=&gt;</span> <span class="n">lang</span><span class="p">,</span>
<a name="line-12"></a>                                 <span class="ss">:options</span> <span class="o">=&gt;</span> <span class="p">{</span> <span class="ss">:encoding</span> <span class="o">=&gt;</span> <span class="s1">&#39;utf-8&#39;</span><span class="p">,</span> <span class="ss">:lineanchors</span> <span class="o">=&gt;</span><span class="s1">&#39;line&#39;</span> <span class="p">}),</span>
<a name="line-13"></a>              <span class="n">lang</span>
<a name="line-14"></a>            <span class="p">)</span>
<a name="line-15"></a>          <span class="k">end</span>
<a name="line-16"></a>        <span class="k">end</span>
<a name="line-17"></a>      <span class="k">end</span>
<a name="line-18"></a>    <span class="k">end</span>
<a name="line-19"></a>  <span class="k">end</span>
<a name="line-20"></a><span class="k">end</span>
</code></pre></div>
<p>You can add as many <a href="http://pygments.org/docs/formatters/">Pygment options</a> to the <code>:options =&gt; { ... }</code> hash. The above ovverrides the <a href="https://github.com/jekyll/jekyll/blob/master/lib/jekyll/converters/markdown/redcarpet_parser.rb">WithPygments module</a> of the redcarpet parser.</p>

<p>After this your code blocks should look like</p>
<div class="highlight"><pre><code class="language-css" data-lang="css"><span></span><a name="line-1"></a><span class="p">.</span><span class="nc">left</span> <span class="p">{</span><span class="k">float</span><span class="p">:</span> <span class="kc">left</span><span class="p">;}</span>
<a name="line-2"></a>
<a name="line-3"></a><span class="p">.</span><span class="nc">right</span> <span class="p">{</span><span class="k">float</span><span class="p">:</span> <span class="kc">right</span><span class="p">;}</span>
</code></pre></div>
<h2>Line highlighting</h2>

<p>...</p>


        </section>

        <footer class="post-footer">

            <!-- Everything inside the #author tags pulls data from the author -->
            <!-- #author-->

            
            <figure class="author-image">
                <a class="img" href="/author/okmanideep" style="background-image: url(/assets/okmanideep-34d7c885397d7187bfe366f2bba160dc2b3d389d196afe2d95a236ec6a751196.jpg)"><span class="hidden">'s Picture</span></a>
            </figure>
            

            <section class="author">
                <h4><a href="/author/okmanideep" rel="author">Manideep Polireddi</a></h4>
                
                
                    <p> Android developer · Design Enthusiast</p>
                
                <div class="author-meta">
                    <span class="author-location icon-location"> Mumbai, India</span> 
                    <!-- <span class="author-link icon-link"><a href="https://okmanideep.github.io"> okmanideep.github.io/</a></span> -->
                <span class="author-twitter icon-twitter"><a href="https://twitter.com/okmanideep">@okmanideep</a></span>
                </div>
            </section>

            <!-- /author  -->

            <section class="share">
                <h4>Share this post</h4>
                <a class="icon-twitter" href="http://twitter.com/share?text=Better code blocks in Jekyll&amp;url=https://okmanideep.github.io/better-code-blocks-in-jekyll"
                    onclick="window.open(this.href, 'twitter-share', 'width=550,height=235');return false;">
                    <span class="hidden">Twitter</span>
                </a>
                <a class="icon-facebook" href="https://www.facebook.com/sharer/sharer.php?u=https://okmanideep.github.io/better-code-blocks-in-jekyll"
                    onclick="window.open(this.href, 'facebook-share','width=580,height=296');return false;">
                    <span class="hidden">Facebook</span>
                </a>
                <a class="icon-google-plus" href="https://plus.google.com/share?url=https://okmanideep.github.io/better-code-blocks-in-jekyll"
                   onclick="window.open(this.href, 'google-plus-share', 'width=490,height=530');return false;">
                    <span class="hidden">Google+</span>
                </a>
            </section>
            
            <!-- Add Disqus Comments -->
            
                <div id="disqus_thread"></div>
<script>
/**
* RECOMMENDED CONFIGURATION VARIABLES: EDIT AND UNCOMMENT THE SECTION BELOW TO INSERT DYNAMIC VALUES FROM YOUR PLATFORM OR CMS.
* LEARN WHY DEFINING THESE VARIABLES IS IMPORTANT: https://disqus.com/admin/universalcode/#configuration-variables
*/
var disqus_config = function () {
    this.page.url = "https://okmanideep.github.io/better-code-blocks-in-jekyll"; // Replace PAGE_URL with your page's canonical URL variable
    this.page.identifier = 20151123201000; // Replace PAGE_IDENTIFIER with your page's unique identifier variable
this.page.title = "Better code blocks in Jekyll"
};
(function() { // DON'T EDIT BELOW THIS LINE
var d = document, s = d.createElement('script');

s.src = 'https://manidesto.disqus.com/embed.js';

s.setAttribute('data-timestamp', +new Date());
(d.head || d.body).appendChild(s);
})();
</script>
<noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript" rel="nofollow">comments powered by Disqus.</a></noscript>

            
            
        </footer>

    </article>

</main>

<aside class="read-next">

    <!-- [[! next_post ]] -->
    
        <a class="read-next-story no-cover" href="/clean-way-to-define-support-library-dependencies">
            <section class="post">
                <h2>Clean way to define support library dependencies</h2>
                <p>As the support library started getting bigger with more tools in it, the team at...</p>
            </section>
        </a>
    
    <!-- [[! /next_post ]] -->
    <!-- [[! prev_post ]] -->
    
        <a class="read-next-story prev no-cover" href="/permissions-in-marshmallow">
            <section class="post">
                <h2>Permissions in marshmallow</h2>
                <p><p>I expect you to first go and have a look at this page in the...</p>
            </section>
        </a>
    
    <!-- [[! /prev_post ]] -->
</aside>

<!-- /post -->


        <footer class="site-footer clearfix">
          <section class="copyright"><a href="/">Blog | Manideep</a> &copy; 2017</section>
          <section class="poweredby">Published with <a href="http://jekyllrb.com/">Jekyll</a></section>
        </footer>
    </div>
    <!-- [[! Ghost outputs important scripts and data with this tag ]] -->
    <script type="text/javascript" src="https://code.jquery.com/jquery-1.11.3.min.js"></script>
    <!-- [[! The main JavaScript file for Casper ]] -->
    <script type="text/javascript" src="/assets/jquery.fitvids-901b9c743bac51c8ab996478f988ecc2afada3cfaf4f2253f3975fc5331205d8.js"></script>
    <script type="text/javascript" src="/assets/index-7a2b9d29160eb0b7584fe9ac12c02eb3312106734d3f54924e417522c6f4b705.js"></script>

    <!-- Add Google Analytics  -->
        <!-- Google Analytics Tracking code -->
     <script>
	    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
	    (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
	    m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
	    })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

	    ga('create', 'UA-57441445-3', 'auto');
	    ga('send', 'pageview');

     </script>   
</body>
</html>
